## 오늘의 삽질

### JPQL Query 

필요 SQL, 오늘이 duration 시작과 끝 사이에 있는지 확인해야함.

select * from habit
where user_id = 3
and practice_days like '%5%'
and duration_end >= '2021-11-05'
and duration_start <= '2021-11-05';

```java
@Query("select h from HabitWithCounter h " +
        "where h.user = :user " +
        "and h.practiceDays like %:day% " +
        "and h.durationStart <= :today " +
        "and h.durationEnd >= :today")
List<Habit> findTodayHabitListByUser(User user, int day, LocalDate today);
```



두 가지 같이 얘기해봤으면 좋겠습니다요

1. User가 너무 많은 역할을 하는 것 같습니다.
   - 현재의 유저는 몬스터의 이름, 몬스터 경험치, 몬스터 레벨을 가지고 있습니다.
     레벨이나 경험치는 유저가 가진 것 이라고 생각하고 개발했기 때문인 것 같습니다.
     하지만 도메인을 생각해보면 사실은 유저의 레벨이 5에서 다시 1로 돌아가는 개념이 아니고
     레벨 1의 몬스터를 다시 5까지 키우는 개념이니까 
     저는 유저보다는 몬스터가 경험치나 레벨을 가지고 있는게 맞다는 생각이 들었습니다.
   - 그래서 @OneToOne으로 각 유저마다의 몬스터 속성(이름, 경험치, 레벨(또는 등급))을 가지는 새로운 몬스터 테이블을 만들고 사용하면 어떨까 합니다.
     그리고 몬스터 이미지 주소같은 공통적인 부분은 MonsterInfo 같은 테이블로 만들어서 참조하면 좋을 것 같다는 생각입니다.
2. User에는 ProviderType과 UserType이 있는데 하나만 사용했으면 좋겠습니다.
   둘중 하나고르기!
